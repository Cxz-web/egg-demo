(function(e){function t(t){for(var o,i,a=t[0],c=t[1],u=t[2],d=0,h=[];d<a.length;d++)i=a[d],r[i]&&h.push(r[i][0]),r[i]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);l&&l(t);while(h.length)h.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],o=!0,a=1;a<n.length;a++){var c=n[a];0!==r[c]&&(o=!1)}o&&(s.splice(t--,1),e=i(i.s=n[0]))}return e}var o={},r={app:0},s=[];function i(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=o,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="https://www.cxzweb.club/api/public/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=t,a=a.slice();for(var u=0;u<a.length;u++)t(a[u]);var l=c;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var o=n("64a9"),r=n.n(o);r.a},"068a":function(e,t,n){"use strict";var o=n("9490"),r=n.n(o);r.a},"13b0":function(e,t,n){},3543:function(e,t,n){},"3a75":function(e,t,n){"use strict";var o=n("cd24"),r=n.n(o);r.a},"4e98":function(e,t,n){},"4efe":function(e,t,n){"use strict";var o=n("3543"),r=n.n(o);r.a},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("097d");var o=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},s=[],i={name:"app"},a=i,c=(n("034f"),n("2877")),u=Object(c["a"])(a,r,s,!1,null,null,null);u.options.__file="App.vue";var l=u.exports,d=n("8c4f"),h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("form",{on:{submit:function(t){return t.preventDefault(),e.toVideo(t)}}},[n("div",[n("label",{attrs:{for:""}},[e._v("房间号")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.roomToken,expression:"roomToken"}],attrs:{type:"text",required:"required"},domProps:{value:e.roomToken},on:{input:function(t){t.target.composing||(e.roomToken=t.target.value)}}})]),n("div",[n("label",{attrs:{for:""}},[e._v("用户名")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.userName,expression:"userName"}],attrs:{type:"text",required:"required"},domProps:{value:e.userName},on:{input:function(t){t.target.composing||(e.userName=t.target.value)}}})]),n("button",{attrs:{type:"submit"}},[e._v("加入房间")])])])},f=[],m={data:function(){return{roomToken:"",userName:""}},methods:{toVideo:function(){this.$router.push({path:"/screen",query:{roomId:this.roomToken,userId:this.userName}})}}},p=m,v=(n("8241"),Object(c["a"])(p,h,f,!1,null,null,null));v.options.__file="LoginRoom.vue";var b=v.exports,g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"main"},[n("button",{on:{click:e.joinRoom}},[e._v("加入房间")]),n("div",{staticClass:"my-live",attrs:{id:"localplayer"}},[n("div",{ref:"remoteplayer",staticClass:"user-live",attrs:{id:"remoteplayer"}})])])},y=[],w=(n("7514"),n("ac6a"),n("96cf"),n("1da1")),I=n("bc3a"),k=n.n(I),T=n("a7a3"),_=n("d4ec"),R=n("bee2"),C="https://room.double-teacher-test.cs.dreamdev.cn",x=function(){function e(){Object(_["a"])(this,e)}return Object(R["a"])(e,[{key:"_request",value:function(e){var t=C+"/"+e.url,n=null;return n=(e.method,k()({method:e.method,params:e.params,url:t})),n}},{key:"getRoomToken",value:function(e,t){var n={url:"v1/rtn/rooms/".concat(e,"/users/").concat(t,"/token"),method:"get",params:{permission:"admin"}};return this._request(n)}},{key:"uploadRecord",value:function(e,t,n){var o={url:"v1/rtn/rooms/".concat(e,"/users/").concat(t,"/record"),method:"post",params:{record_action:n,created_time:Math.ceil((new Date).getTime()/1e3)}};return this._request(o)}},{key:"changeUser",value:function(e,t,n){var o={url:"v1/rtn/rooms/".concat(e,"/admin"),method:"put",params:{action:n,to_user:t}};return this._request(o)}}]),e}(),P=x,j={data:function(){return{roomId:"",appId:"",userId:"",roomToken:"",myRTC:null,MasterId:"11111",publishedInfo:[],live:null}},created:function(){this.getPublishedInfo(),this.userId=this.$route.query.userId,this.roomId=this.$route.query.roomId,this.live=new P},mounted:function(){var e=this;T["log"].setLevel("disable"),this.myRTC=new T["QNRTCSession"],window.onbeforeunload=function(){e.myRTC.leaveRoom()}},destroyed:function(){this.myRTC.leaveRoom()},methods:{joinRoom:function(){var e=Object(w["a"])(regeneratorRuntime.mark(function e(){var t,n,o=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.live.getRoomToken(this.roomId,this.userId);case 3:return t=e.sent,this.roomToken=t.data.room_token,e.next=7,this.myRTC.joinRoomWithToken(this.roomToken);case 7:n=e.sent,console.log("加入房间成功! 当前房间的用户:",n),this._addlisten(this.myRTC),this.myRTC.on("user-publish",function(e){o.mergeOther(e.userId),o.subscribeUser(o.myRTC,e),o.live.uploadRecord(o.roomId,o.userId,"published").then(function(e){console.log(e)})}),this.myRTC.on("republish",function(){console.log("重新发布"),o.mergeOwner()}),this.myRTC.on("resubscribe",function(e){console.log("重新订阅别人",e),o.removeStyle(),setTimeout(function(){o.removeStyle()},500)}),this.myRTC.on("error",function(e){console.log("发生错误",e)}),this.firstSubscribe(n),this.localVideo(),e.next=21;break;case 18:e.prev=18,e.t0=e["catch"](0),console.log("加入房间失败",e.t0);case 21:case"end":return e.stop()}},e,this,[[0,18]])}));function t(){return e.apply(this,arguments)}return t}(),subscribeUser:function(e,t){var n=this;t.published&&e.subscribe(t.userId).then(function(e){var t=document.getElementById("remoteplayer");e.play(t),n.removeStyle()}).catch(function(e){console.log("subscribe error!",e)})},mergeOwner:function(){this.userId==this.MasterId&&(console.log("房主合流成功"),this.myRTC.setMergeStreamLayout(this.MasterId,{x:0,y:0,w:1280,h:720,hidden:!1,muted:!1}))},mergeOther:function(e){if(this.userId==this.MasterId){var t={x:100*Math.ceil(9*Math.random()),y:0,w:200,h:200,z:1,hidden:!1,muted:!1};console.log("新用户的流合并成功，画布配置为：",t),this.myRTC.setMergeStreamLayout(e,t)}},removeStyle:function(){var e=this.$refs.remoteplayer,t=e.getElementsByTagName("video"),n=Array.prototype.slice.call(t);console.log(n,"清除原本样式"),n.forEach(function(e){e.style=""})},_addlisten:function(e){var t=this;this.userId===this.MasterId&&(e.on("user-join",function(e){console.log("有用户进来！"),t.live.uploadRecord(t.roomId,e.userId,"joined")}),e.on("user-leave",function(e){console.log("有用户进来！"),t.live.uploadRecord(t.roomId,e.userId,"leaved")}),e.on("user-unpublish",function(e){console.log("有用户进来！"),t.live.uploadRecord(t.roomId,e.userId,"unpublished")}),e.on("mute",function(e){t.live.uploadRecord(t.roomId,e.userId,"mute")}))},firstSubscribe:function(e){for(var t=0;t<e.length;t+=1){var n=e[t];n.published&&n.userId!=this.myRTC.userId&&this.subscribeUser(this.myRTC,n)}},localVideo:function(){var e=Object(w["a"])(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,T["deviceManager"].getLocalStream({video:{enabled:!0,width:640,height:480,bitrate:600},audio:{enabled:!0,bitrate:32}});case 2:return t=e.sent,e.next=5,this.myRTC.publish(t);case 5:n=document.getElementById("localplayer"),t.play(n,!0),this.removeStyle(),this.mergeOwner();case 9:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),changeUser:function(e){this.live.changeUser(this.roomId,this.userId,e).then(function(e){console.log(e)})},getOptions:function(e){var t=this.publishedInfo.find(function(t){return t.userId==e});if(t)return t.videoInfo;var n={userId:e,videoInfo:{x:200*this.publishedInfo.length,y:0,w:200,h:200,z:1,hidden:!1,muted:!1}};return this.publishedInfo.push(n),this.setPublishedInfo(this.publishedInfo),n.videoInfo},setPublishedInfo:function(e){var t=JSON.stringify(e);sessionStorage.setItem("publishedInfo",t)},getPublishedInfo:function(){var e=sessionStorage.getItem("publishedInfo");this.publishedInfo=e?JSON.parse(e):[]}}},S=j,$=(n("cd98"),Object(c["a"])(S,g,y,!1,null,"9acee4a4",null));$.options.__file="ShowVideo.vue";var O=$.exports,E=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"main"},[e.showBtn?n("button",{staticClass:"btn",on:{click:e.joinRoom}},[e._v("加入房间")]):e._e(),n("div",{staticClass:"my-live",attrs:{id:"localplayer"}})])},M=[],L={data:function(){return{roomId:"",appId:"",userId:"",roomToken:"",myRTC:null,MasterId:"11111",publishedInfo:[],live:null,showBtn:!0}},created:function(){this.getPublishedInfo(),this.userId=this.$route.query.userId,this.roomId=this.$route.query.roomId,this.live=new P},mounted:function(){var e=this;T["log"].setLevel("disable"),this.myRTC=new T["StreamModeSession"],window.onbeforeunload=function(){e.myRTC.leaveRoom()}},destroyed:function(){this.myRTC.leaveRoom()},methods:{joinRoom:function(){var e=Object(w["a"])(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.live.getRoomToken(this.roomId,this.userId);case 3:return t=e.sent,this.roomToken=t.data.room_token,e.next=7,this.myRTC.joinRoomWithToken(this.roomToken);case 7:n=e.sent,console.log("加入房间成功! 当前房间的用户:",n),this.showBtn=!1,this._addlisten(this.myRTC),this.myRTC.on("error",function(e){console.log("发生错误",e)}),this.localVideo(),e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](0),console.log("加入房间失败",e.t0);case 18:case"end":return e.stop()}},e,this,[[0,15]])}));function t(){return e.apply(this,arguments)}return t}(),subscribeUser:function(e,t){var n=this;t.published&&e.subscribe(t.userId).then(function(e){var t=document.getElementById("remoteplayer");e.play(t),n.removeStyle()}).catch(function(e){console.log("subscribe error!",e)})},removeStyle:function(){var e=this.$refs.remoteplayer,t=e.getElementsByTagName("video"),n=Array.prototype.slice.call(t);console.log(n,"清除原本样式"),n.forEach(function(e){e.style=""})},_addlisten:function(e){var t=this;this.userId===this.MasterId&&(e.on("user-join",function(e){console.log("有用户进来！"),t.live.uploadRecord(t.roomId,e.userId,"joined")}),e.on("user-leave",function(e){console.log("有用户进来！"),t.live.uploadRecord(t.roomId,e.userId,"leaved")}),e.on("user-unpublish",function(e){console.log("有用户进来！"),t.live.uploadRecord(t.roomId,e.userId,"unpublished")}),e.on("mute",function(e){t.live.uploadRecord(t.roomId,e.userId,"mute")}))},firstSubscribe:function(e){for(var t=0;t<e.length;t+=1){var n=e[t];n.published&&n.userId!=this.myRTC.userId&&this.subscribeUser(this.myRTC,n)}},localVideo:function(){var e=Object(w["a"])(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,T["deviceManager"].getLocalStream({screen:{enabled:!0,width:1280,height:720,bitrate:1500,source:"window"},audio:{enabled:!0,bitrate:32}});case 2:return t=e.sent,e.next=5,this.myRTC.publish(t);case 5:n=document.getElementById("localplayer"),t.play(n,!0),this.removeStyle();case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),changeUser:function(e){this.live.changeUser(this.roomId,this.userId,e).then(function(e){console.log(e)})},getOptions:function(e){var t=this.publishedInfo.find(function(t){return t.userId==e});if(t)return t.videoInfo;var n={userId:e,videoInfo:{x:200*this.publishedInfo.length,y:0,w:200,h:200,z:1,hidden:!1,muted:!1}};return this.publishedInfo.push(n),this.setPublishedInfo(this.publishedInfo),n.videoInfo},setPublishedInfo:function(e){var t=JSON.stringify(e);sessionStorage.setItem("publishedInfo",t)},getPublishedInfo:function(){var e=sessionStorage.getItem("publishedInfo");this.publishedInfo=e?JSON.parse(e):[]}}},N=L,B=(n("068a"),Object(c["a"])(N,E,M,!1,null,"50506b05",null));B.options.__file="ScreenVideo.vue";var U=B.exports,q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"main"},[e.showBtn?n("button",{staticClass:"btn",on:{click:e.joinRoom}},[e._v("打开摄像头")]):e._e(),n("div",{staticClass:"self",attrs:{id:"localplayer"}}),e.showPPT?n("div",{staticClass:"pdf"},[n("iframe",{attrs:{src:e.ppt_url,frameborder:"0",width:"100%",height:"100%"}})]):e._e(),n("div",{staticClass:"paint"},[n("canvas",{ref:"myCanvas",staticClass:"myCanvas",on:{mousedown:function(t){e.write(t)}}})]),n("div",{staticClass:"draw"},[n("div",{ref:"pen",staticClass:"pen common icon-pen iconfont",on:{click:function(t){e.showPen=!e.showPen}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.showPen,expression:"showPen"}],staticClass:"color-box"},e._l(e.colorAll,function(t){return n("div",{staticClass:"color",style:"backgroundColor:"+t,on:{click:function(n){e.showCanvas(t)}}})}),0)]),n("div",{ref:"eraser",staticClass:"eraser common icon-xiangpica iconfont",on:{click:e.useEraser}}),n("div",{staticClass:"common iconfont icon-qingchuhuancun clear",on:{click:e.cancelDraw}})]),n("div",{staticClass:"handle",on:{click:e.openHandle}},[n("span",{staticClass:"iconfont icon-custom-teacher"})]),e.showPPT?e._e():n("div",{staticClass:"ppt-box"},e._l(e.pptList,function(t){return n("div",{staticClass:"ppt-info",on:{dblclick:function(n){e.openPPT(t)}}},[e._m(0,!0),n("span",{staticClass:"ppt-name"},[e._v(e._s(t))])])}),0)])},z=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"ppt-img"},[o("img",{attrs:{src:n("7407"),alt:""}})])}],V={data:function(){return{showPPT:!1,show:!1,roomId:"",appId:"",userId:"",roomToken:"",myRTC:null,MasterId:"11111",publishedInfo:[],live:null,showBtn:!0,ctx:null,colorAll:["#000000","#d81e06","#0622d8","#d806a5","#1296db","#f4ea2a"],showPen:!1,nowItem:"",eraser:!1,src:"",pptList:[],ppt_url:""}},created:function(){console.log(1),this.live=new P,this.getPPT()},mounted:function(){this.$refs.myCanvas.width=document.body.clientWidth,this.$refs.myCanvas.height=document.body.clientHeight-25},methods:{openHandle:function(){var e="".concat(window.document.location.origin,"/#/handle");window.open(e,"","height=400, width=400, top=200, left=40, toolbar=no,titlebar=no,menubar=no, scrollbars=no, resizable=no, location=no, status=no")},openPPT:function(e){var t=this;this.showPPT=!0,this.ppt_url="https://view.officeapps.live.com/op/embed.aspx?src=https://www.cxzweb.club/api/ppt/".concat(e),console.log("https://www.cxzweb.club/api/ppt/".concat(e)),setTimeout(function(){t.$refs.myCanvas.width=document.body.clientWidth,t.$refs.myCanvas.height=document.body.clientHeight-25},2e3)},getPPT:function(){var e=this;k.a.get("https://www.cxzweb.club/api/getPPT").then(function(t){e.pptList=t.data,console.log(e.pptList)})},cancelDraw:function(){var e=this.$refs.myCanvas.getContext("2d");e.clearRect(0,0,document.body.clientWidth,document.body.clientHeight)},useEraser:function(){this.eraser=!0,this.$refs.pen.style="color:black;background-color:white",this.$refs.eraser.classList.add("eraser-active")},showCanvas:function(e){this.nowColor=e,this.eraser=!1,this.$refs.eraser.classList.remove("eraser-active"),this.$refs.pen.style="background-color:".concat(e,";color:white")},write:function(e){var t=this,n=this.src,o=(this.$refs.myCanvas,this.$refs.myCanvas.getContext("2d"));if(this.eraser)return this.$refs.myCanvas.onmousemove=function(e){o.clearRect(e.pageX-5,e.pageY-5,15,15)},void(this.$refs.myCanvas.onmouseup=function(e){t.$refs.myCanvas.onmousemove=null});o.beginPath(),o.moveTo(e.pageX,e.pageY),o.lineWidth="4",o.strokeStyle=this.nowColor,this.$refs.myCanvas.onmousemove=function(e){o.lineTo(e.pageX,e.pageY),o.stroke(),console.log(n)},this.$refs.myCanvas.onmouseup=function(e){t.$refs.myCanvas.onmousemove=null}},joinRoom:function(){var e=Object(w["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.showBtn=!1,this.localVideo();case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),subscribeUser:function(e,t){t.published&&e.subscribe(t.userId).then(function(e){var t=document.getElementById("remoteplayer");e.play(t)}).catch(function(e){console.log("subscribe error!",e)})},firstSubscribe:function(e){for(var t=0;t<e.length;t+=1){var n=e[t];n.published&&n.userId!=this.myRTC.userId&&this.subscribeUser(this.myRTC,n)}},localVideo:function(){var e=Object(w["a"])(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,T["deviceManager"].getLocalStream({video:{enabled:!0,width:1280,height:720,bitrate:1500},audio:{enabled:!0,bitrate:32}});case 2:t=e.sent,n=document.getElementById("localplayer"),t.play(n,!0);case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),changeUser:function(e){this.live.changeUser(this.roomId,this.userId,e).then(function(e){console.log(e)})},getOptions:function(e){var t=this.publishedInfo.find(function(t){return t.userId==e});if(t)return t.videoInfo;var n={userId:e,videoInfo:{x:200*this.publishedInfo.length,y:0,w:200,h:200,z:1,hidden:!1,muted:!1}};return this.publishedInfo.push(n),this.setPublishedInfo(this.publishedInfo),n.videoInfo},setPublishedInfo:function(e){var t=JSON.stringify(e);sessionStorage.setItem("publishedInfo",t)},getPublishedInfo:function(){var e=sessionStorage.getItem("publishedInfo");this.publishedInfo=e?JSON.parse(e):[]}}},J=V,W=(n("5730"),Object(c["a"])(J,q,z,!1,null,"ddb256c8",null));W.options.__file="ReadPDF.vue";var H=W.exports,D=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"uploadPPT"},[n("div",{staticClass:"file"},[n("label",{staticClass:"box"},[n("input",{ref:"myForm",staticClass:"ppt-input",staticStyle:{display:"none"},attrs:{name:"file",type:"file"},on:{change:e.uploadPPT}}),n("div",{staticClass:"btn",attrs:{type:"submit"},on:{submit:e.submit}},[e._v("上传到服务器")])])]),e.show?n("x-loading"):e._e()],1)},X=[];function A(e){var t=new FormData;return t.append("file",e),console.log(e,t),k()({method:"post",onUploadProgress:function(e){console.log(e)},baseURL:"https://www.cxzweb.club/api/uploadPPT",headers:{"Content-Type":"multipart/form-data"},data:t})}var F=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},Y=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"main-loading"},[o("img",{attrs:{src:n("fc71"),alt:""}})])}],Q={data:function(){return{}}},G=Q,K=(n("8b87"),Object(c["a"])(G,F,Y,!1,null,"d401cb26",null));K.options.__file="XLoading.vue";var Z=K.exports,ee={data:function(){return{control:!1,show:!1}},created:function(){},components:{XLoading:Z},methods:{ajax:function(){this.$refs.myForm.files[0]&&(this.control=!0)},submit:function(){if(!this.control)return!1},uploadPPT:function(){var e=this,t=this.$refs.myForm.files[0];t&&(this.$bac.add(),this.show=!0,A(t).then(function(t){e.$bac.remove(),e.show=!1}))}}},te=ee,ne=(n("ab4d"),Object(c["a"])(te,D,X,!1,null,"2508b265",null));ne.options.__file="UploadPPT.vue";var oe=ne.exports,re=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticStyle:{width:"640px"},attrs:{id:"remotetracks"}}),n("button",{on:{click:e.joinRoom}},[e._v("加入房间")])])},se=[],ie=(n("ac4d"),n("8a81"),{data:function(){return{live:null,roomToken:"",myRTC:null}},created:function(){T["log"].setLevel("disable"),this.live=new P,this.myRTC=new T["TrackModeSession"]},methods:{joinRoom:function(){var e=Object(w["a"])(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.live.getRoomToken("123","user");case 3:return t=e.sent,this.roomToken=t.data.room_token,e.next=7,this.myRTC.joinRoomWithToken(this.roomToken);case 7:n=e.sent,console.log("加入房间成功! 当前房间的用户:",n),this.autoSubscribe(this.myRTC),e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](0),console.log("加入房间失败",e.t0);case 15:case"end":return e.stop()}},e,this,[[0,12]])}));function t(){return e.apply(this,arguments)}return t}(),subscribe:function(){var e=Object(w["a"])(regeneratorRuntime.mark(function e(t,n){var o,r,s,i,a,c,u,l;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.subscribe(n.map(function(e){return e.trackId}));case 2:for(o=e.sent,r=document.getElementById("remotetracks"),s=!0,i=!1,a=void 0,e.prev=7,c=o[Symbol.iterator]();!(s=(u=c.next()).done);s=!0)l=u.value,l.play(r);e.next=15;break;case 11:e.prev=11,e.t0=e["catch"](7),i=!0,a=e.t0;case 15:e.prev=15,e.prev=16,s||null==c.return||c.return();case 18:if(e.prev=18,!i){e.next=21;break}throw a;case 21:return e.finish(18);case 22:return e.finish(15);case 23:case"end":return e.stop()}},e,this,[[7,11,15,23],[16,,18,22]])}));function t(t,n){return e.apply(this,arguments)}return t}(),autoSubscribe:function(e){var t=this,n=e.trackInfoList;console.log("room current trackInfo list",n),this.subscribe(e,n).then(function(){return console.log("subscribe success!")}).catch(function(e){return console.error("subscribe error",e)}),e.on("track-add",function(n){console.log("get track-add event!",n),t.subscribe(e,n).then(function(){return console.log("subscribe success!")}).catch(function(e){return console.error("subscribe error",e)})})}}}),ae=ie,ce=(n("4efe"),Object(c["a"])(ae,re,se,!1,null,null,null));ce.options.__file="Subscribe.vue";var ue=ce.exports,le=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticStyle:{width:"1280px"},attrs:{id:"localtracks"}}),n("button",{on:{click:e.joinRoom}},[e._v("加入房间")])])},de=[],he={data:function(){return{live:null,roomToken:"",myRTC:null}},created:function(){T["log"].setLevel("disable"),this.live=new P,this.myRTC=new T["TrackModeSession"]},methods:{joinRoom:function(){var e=Object(w["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.live.getRoomToken("123","admin");case 3:return t=e.sent,this.roomToken=t.data.room_token,e.next=7,this.myRTC.joinRoomWithToken(this.roomToken);case 7:return e.next=9,this.publish(this.myRTC);case 9:e.sent,e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](0),console.log("加入房间失败",e.t0);case 15:case"end":return e.stop()}},e,this,[[0,12]])}));function t(){return e.apply(this,arguments)}return t}(),publish:function(){var e=Object(w["a"])(regeneratorRuntime.mark(function e(t){var n,o,r,s,i,a,c,u;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,T["deviceManager"].getLocalTracks({audio:{enabled:!0,tag:"audio"},screen:{enabled:!0,tag:"screen",width:1280,height:720,bitrate:1800}});case 2:n=e.sent,console.log(n),o=document.getElementById("localtracks"),r=!0,s=!1,i=void 0,e.prev=8,a=n[Symbol.iterator]();case 10:if(r=(c=a.next()).done){e.next=18;break}if(u=c.value,"audio"!==u.info.tag){e.next=14;break}return e.abrupt("continue",15);case 14:u.play(o,!0);case 15:r=!0,e.next=10;break;case 18:e.next=24;break;case 20:e.prev=20,e.t0=e["catch"](8),s=!0,i=e.t0;case 24:e.prev=24,e.prev=25,r||null==a.return||a.return();case 27:if(e.prev=27,!s){e.next=30;break}throw i;case 30:return e.finish(27);case 31:return e.finish(24);case 32:this.mergeTracks(n,t),console.log("publish success!");case 34:case"end":return e.stop()}},e,this,[[8,20,24,32],[25,,27,31]])}));function t(t){return e.apply(this,arguments)}return t}(),mergeTracks:function(e,t){var n=[];e.forEach(function(e){if("video"===e.info.tag){var t={trackId:e.info.trackId,x:20,y:0,w:200,h:200};n.push(t)}else if("screen"===e.info.tag){var o={trackId:e.info.trackId,x:0,y:0,w:1280,h:720};n.push(o)}else{var r={trackId:e.info.trackId};n.push(r)}}),console.log(n),t.addMergeStreamTracks(n)}}},fe=he,me=(n("3a75"),Object(c["a"])(fe,le,de,!1,null,null,null));me.options.__file="Publish.vue";var pe=me.exports,ve=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},be=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"Handle-main"},[n("button",[e._v("发红包")]),n("button",[e._v("操作")]),n("button",[e._v("操作")]),n("button",[e._v("操作")])])}],ge={},ye=ge,we=(n("9ce1"),Object(c["a"])(ye,ve,be,!1,null,"20ad064b",null));we.options.__file="TeacherHandle.vue";var Ie=we.exports;o["a"].use(d["a"]);var ke=new d["a"]({routes:[{path:"/",component:b},{path:"/live",component:O},{path:"/screen",component:U},{path:"/pdf",component:H},{path:"/upload",component:oe},{path:"/pub",component:pe},{path:"/sub",component:ue},{path:"/handle",component:Ie}]}),Te=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"x-bac"})},_e=[],Re={data:function(){return{}}},Ce=Re,xe=(n("f830"),Object(c["a"])(Ce,Te,_e,!1,null,"245b3bd4",null));xe.options.__file="XBac.vue";var Pe=xe.exports,je=o["a"].extend(Pe),Se={add:function(e){var t={data:e},n=new je(t);return this.obj=n.$mount(),document.body.appendChild(this.obj.$el),n.vm},remove:function(){var e=this;this.obj.$el.classList.add("leave"),this.obj.$el.addEventListener("animationend",function(){e.obj.$el.parentNode.removeChild(e.obj.$el)})},obj:{}},$e=Se;n("61d5");o["a"].config.productionTip=!1,o["a"].prototype.$bac=$e,new o["a"]({render:function(e){return e(l)},router:ke}).$mount("#app")},5730:function(e,t,n){"use strict";var o=n("7739"),r=n.n(o);r.a},"61d5":function(e,t,n){},"64a9":function(e,t,n){},6635:function(e,t,n){},7407:function(e,t,n){e.exports=n.p+"img/PPT.485b76a2.svg"},7739:function(e,t,n){},8241:function(e,t,n){"use strict";var o=n("acf7"),r=n.n(o);r.a},"8b87":function(e,t,n){"use strict";var o=n("6635"),r=n.n(o);r.a},9490:function(e,t,n){},"9ce1":function(e,t,n){"use strict";var o=n("4e98"),r=n.n(o);r.a},a7e2:function(e,t,n){},ab4d:function(e,t,n){"use strict";var o=n("a7e2"),r=n.n(o);r.a},acf7:function(e,t,n){},cd24:function(e,t,n){},cd98:function(e,t,n){"use strict";var o=n("13b0"),r=n.n(o);r.a},f830:function(e,t,n){"use strict";var o=n("fb3f"),r=n.n(o);r.a},fb3f:function(e,t,n){},fc71:function(e,t,n){e.exports=n.p+"img/loading-spinning-bubbles.68ba24cc.svg"}});